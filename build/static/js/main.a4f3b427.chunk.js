(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{15:function(e,t,n){e.exports=n(29)},20:function(e,t,n){},26:function(e,t){},27:function(e,t){},28:function(e,t){},29:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(6),o=n.n(i),c=(n(20),n(12)),u=n(7),l=function(e){var t=e.count;return r.a.createElement("header",null,r.a.createElement("p",null,"find people: ",r.a.createElement("b",null,t)))},s=n(9),f=n(10),d=n(13),v=n(11),h=n(14),m=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return!1}},{key:"render",value:function(){var e=this.props,t=e.canvasRef,n=e.width,a=e.height;return console.log("canvas update"),r.a.createElement("canvas",{ref:t,id:"canvas",width:n,height:a}," ")}}]),t}(a.Component),p=function(){var e=r.a.createRef(),t=r.a.createRef(),n=(r.a.createRef(),Object(a.useState)(0)),i=Object(c.a)(n,2),o=i[0],s=i[1];Object(a.useEffect)(function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var t=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(function(t){return window.stream=t,e.current.srcObject=t,new Promise(function(t,n){e.current.onloadedmetadata=function(){t()}})}),n=u.a();Promise.all([n,t]).then(function(t){f(e.current,t[0])}).catch(function(e){console.error(e)})}},[]);var f=function e(n,a){a.detect(n).then(function(r){var i=d(r);s(i.length),t.current&&function(e,t){var n=t.current.getContext("2d");n.clearRect(0,0,n.canvas.width,n.canvas.height);var a="16px sans-serif";n.font=a,n.textBaseline="top",e.forEach(function(e){var t=e.bbox[0],r=e.bbox[1],i=e.bbox[2],o=e.bbox[3];n.strokeStyle="#00FFFF",n.lineWidth=4,n.strokeRect(t,r,i,o),n.fillStyle="#00FFFF";var c=n.measureText(e.class).width,u=parseInt(a,10);n.fillRect(t,r,c+4,u+4)}),e.forEach(function(e){var t=e.bbox[0],a=e.bbox[1];n.fillStyle="#000000",n.fillText(e.class,t,a)})}(i,t),requestAnimationFrame(function(){e(n,a)})})},d=function(e){return e.filter(function(e){return"person"===e.class})},v=function(){return window.innerWidth-20},h={width:v()};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(l,{count:o}),r.a.createElement("div",{className:"viewer",style:h},r.a.createElement("video",{ref:e,id:"video",width:v(),height:"700",autoPlay:!0}," "),r.a.createElement(m,{canvasRef:t,width:v(),height:"700"})))};var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.a4f3b427.chunk.js.map